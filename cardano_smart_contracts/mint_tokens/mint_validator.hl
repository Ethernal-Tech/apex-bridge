minting minting_policy

import { tx } from ScriptContext

const NFT_POLICY = MintingPolicyHash::new(#)
const NFT_NAME   = #
const NFT        = AssetClass::new(NFT_POLICY, NFT_NAME)

// Check if a Valuable (TxInput or TxOutput) contains exactly 1 of the required NFT
func contains_nft[V: Valuable](v: V) -> Bool {
    v.value.get_safe(NFT) == 1
}

func main(_redeemer: Int) -> () {
    nft_input = tx.inputs.find((input: TxInput) -> Bool {
        contains_nft(input)
    })

    nft_output = tx.outputs.find((output: TxOutput) -> Bool {
        contains_nft(output)
    })

    assert(nft_input.address == nft_output.address, "NFT output address not equal to NFT input address")
}